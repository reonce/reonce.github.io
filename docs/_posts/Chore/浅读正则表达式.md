# 浅读正则表达式

## 导读

  长期以来我对正则表达式的理解是：

1. 可以百度查到，随用随查
2. 印象中不难，但是看不懂
3. 比起其他的知识，它的优先级不高

但是要系统的学习JS基础，正则我认为是不可少的一环

本文目的在于能够使用简单的，看懂正常的正则表达式

## 创建正则表达式

ECNAScript 通过RegExp类型支持正则表达式，它在JS中有两种创建方式：

1. 通过字面量定义，类似于Perl的简洁语法创建
2. 通过RegExp构建函数创建

### 通过字面量定义的语法创建

~~~js
let expression = /pattern/flags;
~~~

上面这个正则表达式的`pattern`表示任何简单或者复杂的正则表达式，包括字符类、限定符、分组、向前查找和向后引用。后面的`flags`表示控制正则表达式筛选的条件，也就是一种规则。下面列举出了表示匹配模式的标记([MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions))

| 标志 | 描述                                                      |
| :--: | :-------------------------------------------------------- |
| `g`  | 全局搜索。                                                |
| `i`  | 不区分大小写搜索。                                        |
| `m`  | 多行搜索。                                                |
| `s`  | 允许 `.` 匹配换行符。                                     |
| `u`  | 使用unicode码的模式进行匹配。                             |
| `y`  | 执行“粘性(`sticky`)”搜索,匹配从目标字符串的当前位置开始。 |

使用不同的模式和标记就可以创建出各种正则表达式，比如：

```js
// 匹配字符串中所有的"at"
let pattern1 = /at/g;
// 匹配第一个"bat"或"cat",忽略大小写
let pattern2 = /[bc]at/i;
// 匹配所有以"at"结尾的三字符组合,忽略大小写
let pattern3 = /.at/gi;
```

与其他语言的正则表达式类似，所有*元字符*都需要进行转义

> 元字符包括 ( [ { \ ^ $ | ) ] } ? * + .

```js
// 匹配第一个"[bc]at",忽略大小写
let pattern4 = /\[bc]\]at/i;
// 匹配所有".at",忽略大小写
let parrern5 = /\.at/gi;
```

### 通过RegExp构建函数创建

正则表达式也可以通过RegExp构造函数创建，它接受两个参数，模式字符串和（可选的）标记字符串。任何使用字面量定义的正则表达式也可以通过构造函数进行创建，比如：

```js
// 匹配第一个"bat"或"cat",忽略大小写
let pattern6 = /[bc]at/i;
```

也可以通过构造函数创建

```js
// 和pattern6一样，不过是通过构造函数创建
let pattern7 = new RegExp("[bc]at", "i");
```

通过构造函数使用元字符时，需要进行二次转义（例如`"\"`在字面量转义的时候需要表示为`"\\"`,而在构造函数中需要表示为`"\\\\"`）

|     字面量模式     |      对应的字符串       |
| :----------------: | :---------------------: |
|    `/\[bc\]at/`    |     `"\\[bc\\]at"`      |
|      `/\.at/`      |        `"\\.at"`        |
|   `/\d.\d{1,2}/`   |    `"\\d.\\d{1,2}"`     |
| `/\w\\hello\\123/` | `"\\w\\\\hello\\\\123"` |

此外，使用RegExp也可以基于已有的正则表达式实例，并可以选择性的修改它们的标记

```js
const rel = /cat/g;
console.log(rel);  // "/cat/g"

const rel2 = new RegExp(rel);
console.log(rel2);  // "/cat/g"

const rel3 = new RegExp(rel, "i");
console.log(rel3);  // "/cat/i"
```

> 关于RegExp构造函数，本文只简单讲述了创建，实际上它包含很多实例属性、实例方法以及构造函数属性。

以上就是本文的全部内容了，完