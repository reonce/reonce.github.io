# 预估业务错误引发的思考

## 需求背景

 一个树形多选组件，当子节点全部选中的时候，只传父节点的值，否则传子节点

## 错误判断

因为在ng-zorro中，这个逻辑是默认的，于是我很爽快的答应了后端这样做。但是在antd react版本中，子节点全选中会把所有子节点和父节点都传出，和需求商讨的方案是不同的，于是我需要自己实现。

## 技术实现分析

在选中或取消某个节点时，可以拿到当前节点的树结构和对应关系。

1. 当节点作为父节点时，很容易去判断去掉它的子节点。

2. 当节点作为子节点时，**难点**来了，需要判断它的兄弟节点及它兄弟节点的全部子节点是否全部选中，然后如果全中，在用当前节点的父节点走作为父节点的逻辑还要再走作为子节点的逻辑

## 思考 

在充分调研技术之前，不要马虎的答应，那样不够沉稳，并且容易给自己带来麻烦。

当陷入预估错误带来的后果时，有两种解决方案：

1. 自己解决。拼脑力体力解决掉问题，为”吹出去的牛逼“付出代价
2. 重新商讨，求后端改方案。需要好声好气的去找后端同学在商讨方案

两种方案都是被动的局面，比较窘迫。

**其实这些”坏结果”完全是可避免的，如果我认真查看了antd的树组件逻辑，开始就和后端商量好，后端来做数据逻辑处理，就可以避免这个窘境了。**

2022.7.25



## 回顾

最终我是通过自己解决的方式解决了问题，历程大概是 思考-看组件源码-思考-解决，整个过程对自己还是有提升的，但是对于我之前的观点，是没有改变的。我认为： **技术难点的提升不应该是自己刻意制造的，它的出现应该伴随着业务难点的出现，解决业务的痛点**，而我解决这个业务问题，是因为我个人的判断错误造成的技术难点，并不是业务本身技术的复杂性，因此它是不好的，应该避免的。试想一下，如果我没有解决，反而**拖累了研发进度**，那么我可以肯定的说我是**不称职**的。

2023.2.27