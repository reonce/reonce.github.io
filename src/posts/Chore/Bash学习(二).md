# Bash学习(二)

## 第三章 Bash的模式扩展

Bash当中，存在着许多特殊的符号，来表示特殊的命令,这种符号的使用被称为**模式扩展**，其中用到通配符的部分，被称为`通配符扩展`

本章主要以了解为主，知道有这些特殊的符号扩展即可，回头使用来翻阅即可。

### 扩展的开关

Bash 允许用户关闭扩展。

```shell
$ set -o noglob
# 或者
$ set -f
```

下面的命令可以重新打开扩展。

```bash
$ set +o noglob
# 或者
$ set +f
```

### 波浪线`~`扩展

`~`在bash当中表示当前用户的主目录

~~~bash
 $ %echo ~
/Users/jaydonyin
~~~

`~`号拼路径，会表示主目录下拼接的路径，但是此路径必须存在，`bash`中会原样输出，在我电脑的`zsh`环境中，会报错

~~~bash
 $ echo ~/Applications 
/Users/jaydonyin/Applications
$ %echo ~abbccd
zsh: no such user or named directory: abbccd
~~~

`~+`会扩展成当前执行目录的路径，等同于`pwd`

**接下来的内容主要是类似于正则表达式的用法，用来筛选出需要的文件，我复制了一些原文**：

### `?`字符扩展

`?`字符代表文件路径里面的任意单个字符，不包括空字符。比如，`Data???`匹配所有`Data`后面跟着三个字符的文件名。

```
# 存在文件 a.txt 和 b.txt
$ ls ?.txt
a.txt b.txt
```

上面命令中，`?`表示单个字符，所以会同时匹配`a.txt`和`b.txt`。

如果匹配多个字符，就需要多个`?`连用。

```
# 存在文件 a.txt、b.txt 和 ab.txt
$ ls ??.txt
ab.txt
```

不存在复合条件的类型文件，`zsh`环境会报错，`bash`中会原样输出

### `*`字符扩展

`*`字符代表文件路径里面的任意数量的任意字符，包括零个字符。

```
# 存在文件 a.txt、b.txt 和 ab.txt
$ ls *.txt
a.txt b.txt ab.txt
```

### 大括号扩展

大括号扩展`{...}`表示分别扩展成大括号里面的所有值，各个值之间使用逗号分隔。比如，`{1,2,3}`扩展成`1 2 3`。

~~~bash
$ echo {1,2,3}
1 2 3

$ echo d{a,e,i,u,o}g
dag deg dig dug dog

$ echo Front-{A,B,C}-Back
Front-A-Back Front-B-Back Front-C-Back
~~~

**大括号内部的逗号前后不能有空格**。否则，大括号扩展会失效。

### {start..end} 扩展

大括号扩展有一个简写形式`{start..end}`，表示扩展成一个连续序列。比如，`{a..z}`可以扩展成26个小写英文字母。

```
$ echo {a..c}
a b c

$ echo d{a..d}g
dag dbg dcg ddg

$ echo {1..4}
1 2 3 4

$ echo Number_{1..5}
Number_1 Number_2 Number_3 Number_4 Number_5
```

这种简写形式支持逆序。

```
$ echo {c..a}
c b a

$ echo {5..1}
5 4 3 2 1
```

### 变量扩展

`$`开头的词元视为变量，将其扩展成变量值。也可以放在`${}`里面。

### 子命令扩展

`$(...)`可以扩展成另一个命令的运行结果，该命令的所有输出都会作为返回值。

```
$ echo $(date)
Tue Jan 28 00:01:13 CST 2020
```

### 算数扩展

`$((...))`可以扩展成整数运算的结果，详见《Bash 的算术运算》一章。

```
$ echo $((2 + 2))
4
```

### 更多的其他扩展

* 方括号扩展[...]。同正则表达式规则
* [start-end]扩展，例如[1-9]。同正则表达式规则
* 字符类扩展，一些特定的字符标识某种匹配规则，[原文字典链接](原文字典)

### 注意

1. 通配符是先解析，在执行

2. 文件名扩展不匹配时，会原样输出。（zsh中会抛出异常）

3. 只能用于单层路径，不支持跨层匹配

4. 文件名可以使用通配符 

   Bash 允许文件名使用通配符，即文件名包括特殊字符。这时引用文件名，需要把文件名放在单引号或双引号里面。

```
$ touch 'fo*'
$ ls
fo*
```