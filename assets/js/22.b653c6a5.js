(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{237:function(t,e,r){"use strict";r.r(e);var a=r(5),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"关于js失真运算0-55-100-55-0000001"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#关于js失真运算0-55-100-55-0000001"}},[t._v("#")]),t._v(" 关于JS失真运算0.55*100=55.0000001")]),t._v(" "),r("p",[r("em",[t._v("今天写业务偶然实现了"),r("code",[t._v("0.55*100")]),t._v("的代码，结果不尽人意，等于55.0000001")])]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("这好吗? 这不好。原因如下：")]),t._v(" "),r("p",[t._v("在JS中，变量存储没有区分数字型和浮点型，而是统一作为浮点型(float)进行存储，这在很久前学习时有个模糊的印象。\n查阅资料，IEEE 754-2008 标准定义的64bit浮点格式存储number.")]),t._v(" "),r("p",[t._v("其实JavsScript中，变量在存储时并不区分number和float类型，而是统一按float存储，而javascript使用IEEE 754-2008 标准定义的64bit浮点格式存储number，"),r("code",[t._v("0.55")]),t._v("对应的整形部分长度为0,小数部分长度为16，所以默认的计算结果为“55.0000001”，如最后一个小数为0，则取1作为有效数字标志。类似地，可以想像，1/3的结果应该是0.3333333333333333。")]),t._v(" "),r("p",[t._v("我的解决方案是 使用"),r("strong",[t._v("Math.round()")]),t._v(" 函数取整（这里提一句使用toFixed()可能会导致精度丢失）")])])}),[],!1,null,null,null);e.default=n.exports}}]);