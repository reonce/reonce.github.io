(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{275:function(t,s,a){"use strict";a.r(s);var n=a(5),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_17-4-4-键盘与输入事件-17-4-7-hmtl5事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_17-4-4-键盘与输入事件-17-4-7-hmtl5事件"}},[t._v("#")]),t._v(" 17.4.4 键盘与输入事件-17.4.7 HMTL5事件")]),t._v(" "),a("h2",{attrs:{id:"_17-4-4-键盘与输入事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_17-4-4-键盘与输入事件"}},[t._v("#")]),t._v(" 17.4.4 键盘与输入事件")]),t._v(" "),a("p",[t._v("键盘事件包含四个 ：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("keydown")]),t._v(" 用户按下键盘某个键触发")]),t._v(" "),a("li",[a("code",[t._v("keypress")]),t._v(" 用户按下键盘并输入或回退某个字符触发， 在DOM3 被 "),a("code",[t._v("textInput")]),t._v(" 替代")]),t._v(" "),a("li",[a("code",[t._v("keyup")]),t._v(" 用户抬起键盘某个键的时候触发")]),t._v(" "),a("li",[a("code",[t._v("textInput")]),t._v(" 用户在编辑区域中输入字符时触发，只有新增会触发")])]),t._v(" "),a("h3",{attrs:{id:"_1-键码-keycode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-键码-keycode"}},[t._v("#")]),t._v(" 1.键码 keyCode")]),t._v(" "),a("p",[t._v("对于键盘事件来说，会返回一个 "),a("code",[t._v("keyCode")]),t._v(" 表示用户输入键值对应的 "),a("code",[t._v("ASCII")]),t._v(" 值，用来确定用户按下的是哪个键，不区分大小写")]),t._v(" "),a("h3",{attrs:{id:"_2-dom3的改变-不推荐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-dom3的改变-不推荐"}},[t._v("#")]),t._v(" 2.DOM3的改变 （不推荐)")]),t._v(" "),a("blockquote",[a("p",[t._v("注意，缺乏浏览器的广泛支持，不推荐用。 各浏览器厂家也有自己的看法，你规定你的，我不一定用，哈哈")])]),t._v(" "),a("p",[t._v("DOM3 改变了下 "),a("code",[t._v("keyCode")]),t._v(" 的方式， 用键盘事件的 "),a("code",[t._v("key")]),t._v(" 值表示原先的  "),a("code",[t._v("keyCode")]),t._v("， 用"),a("code",[t._v("char")]),t._v(" 在输入非字符键时是"),a("code",[t._v("null")]),t._v("，其他情况和 "),a("code",[t._v("key")]),t._v("一样")]),t._v(" "),a("blockquote",[a("p",[t._v("说实话，鸡肋的设计，直接非字符键用字符串表示，字符键用阿斯特码的数字值表示就行了呗")])]),t._v(" "),a("p",[t._v("还有个 "),a("code",[t._v("location")]),t._v(" 属性，也没得到广泛支持，本身也比较鸡肋，返回值表示按的是键盘左边的键还是右边的(例如 Alt， Shift)")]),t._v(" "),a("h3",{attrs:{id:"_3-textinput-事件-inputmethod属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-textinput-事件-inputmethod属性"}},[t._v("#")]),t._v(" 3.textInput 事件   "),a("code",[t._v("inputMethod")]),t._v("属性")]),t._v(" "),a("p",[t._v("这个事件还是比较有用的，DOM3 要用它去替代原先的 "),a("code",[t._v("keypress")]),t._v("事件。相较于"),a("code",[t._v("keypress")]),t._v(" 事件,它有以下特点：")]),t._v(" "),a("ul",[a("li",[t._v("只在编辑区域触发。 "),a("code",[t._v("keypress")]),t._v(" 会在任何获得焦点的地方触发")]),t._v(" "),a("li",[t._v("只在新增字符时。 "),a("code",[t._v("keypress")]),t._v(" 在任何对文本产生影响的键都会触发")])]),t._v(" "),a("h4",{attrs:{id:"inputmethod-属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#inputmethod-属性"}},[t._v("#")]),t._v(" inputMethod 属性")]),t._v(" "),a("p",[t._v("这个事件的 "),a("code",[t._v("event")]),t._v(" 还有一个叫做  "),a("code",[t._v("inputMethod")]),t._v(" 的属性，表示输入文本的来源，个人觉得这个是有用的，例如禁用用户粘贴等。")]),t._v(" "),a("p",[t._v("可能的值如下：")]),t._v(" "),a("ul",[a("li",[t._v("0， 未知来源")]),t._v(" "),a("li",[t._v("1，表示键盘")]),t._v(" "),a("li",[t._v("2，表示粘贴")]),t._v(" "),a("li",[t._v("3，表示拖放")]),t._v(" "),a("li",[t._v("4，IME")]),t._v(" "),a("li",[t._v("5，表单选项")]),t._v(" "),a("li",[t._v("6，手写设备")]),t._v(" "),a("li",[t._v("7，语音输入")]),t._v(" "),a("li",[t._v("8，组合方式")]),t._v(" "),a("li",[t._v("9，脚本")])]),t._v(" "),a("h2",{attrs:{id:"_17-4-7-html5-事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_17-4-7-html5-事件"}},[t._v("#")]),t._v(" 17.4.7 HTML5 事件")]),t._v(" "),a("p",[t._v("HTML5 详尽的列出了浏览器支持的所有事件，这节会讨论得到浏览器广泛支持的一些事件")]),t._v(" "),a("h3",{attrs:{id:"contextmenu-事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contextmenu-事件"}},[t._v("#")]),t._v(" contextmenu 事件")]),t._v(" "),a("p",[a("code",[t._v("contextmenu")]),t._v(" 事件用来表示何时展示上下文菜单（右键浏览器的菜单），可以设置以展示开发者自定义的菜单。")]),t._v(" "),a("p",[t._v("在现代浏览器上，通过  "),a("code",[t._v("event.preventDefault()")]),t._v(" 阻止右键点击菜单的出现的默认菜单事件，然后展示自定义菜单，例如一个在线表格，你就需要用这个事件在单元格上改变成操作表格的右键菜单。 具体用法示例：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("div"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"contextmenu"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("preventDefault")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" menu "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"menu"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \t\t\t\t\tmenu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientX "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            menu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientY "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   \t\t\t    menu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("visible "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'visible'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h3",{attrs:{id:"beforeunload事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beforeunload事件"}},[t._v("#")]),t._v(" beforeunload事件")]),t._v(" "),a("p",[t._v("这个事件会在 "),a("code",[t._v("window")]),t._v(' 上触发，是给开发者提供阻止页面被卸载的机会，具体场景例如关闭标签页的时候，出一个弹框提示："页面更改未保存，确定要关闭标签页吗？"  具体用法:')]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEvnetLister")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'beforeunload'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'页面更改未保存，确定要关闭标签页吗？'")]),t._v("\n  event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("returnValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// IE和火狐")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 谷歌和Safari")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"domcontentloaded"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#domcontentloaded"}},[t._v("#")]),t._v(" DOMContentLoaded")]),t._v(" "),a("p",[t._v("会在 DOM 树构建完成后立即出发，不用等待图片、 JavaScript 的加载，永远在 "),a("code",[t._v("load")]),t._v(" 事件之前触发")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEvnetLister")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DOMContentLoaded'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("它的 "),a("code",[t._v("event")]),t._v(" 不会包含任何多余属性， "),a("code",[t._v("target")]),t._v(" 等于 "),a("code",[t._v("document")])]),t._v(" "),a("h3",{attrs:{id:"pageshow-与-pagehide-事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pageshow-与-pagehide-事件"}},[t._v("#")]),t._v(" pageshow 与 pagehide 事件")]),t._v(" "),a("p",[a("code",[t._v("pageshow")]),t._v("事件会在页面显示的时候触发，并且会返回是否来自于往返缓存的 "),a("code",[t._v("persisted")]),t._v(" 布尔值属性")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 尽管事件目标是 document , 但是事件必须绑定在 window 上(currentTarget 是 window)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这样可以保存一个变量计数，表示页面加载次数")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" showCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEvnetLister")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pageshow'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \tshowCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("persisted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true 表示来自缓存，false表示不是")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("上面的例子中，如果只是回退前进页面，可以正常计数，如果刷新或关闭标签页会清零")]),t._v(" "),a("p",[a("code",[t._v("pagehide")]),t._v(" 用法和 "),a("code",[t._v("pageshow")]),t._v(" 相同，会在页面卸载的时候触发，它的"),a("code",[t._v("persisted")]),t._v(" 布尔值属性表示是否将页面缓存成功")])])}),[],!1,null,null,null);s.default=e.exports}}]);